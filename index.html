<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å¼€ç›˜æº¢ä»·ç‡è®¡ç®—å™¨</title>
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:system-ui,-apple-system,Segoe UI,Roboto}
:root {--bg: #f7f8fa;--card: #ffffff;--text: #222;--text-secondary: #666;--text-gray: #999;--input-border: #e5e6eb;--btn-calc: #1677ff;--btn-clear: #f5f5f5;--result-line: #f0f0f0;--tip-bg: #f5f7fa;}
:root.dark {--bg: #121212;--card: #1e1e1e;--text: #fff;--text-secondary: #bbb;--text-gray: #888;--input-border: #333;--btn-calc: #0a84ff;--btn-clear: #2a2a2a;--result-line: #333;--tip-bg: #2a2a2a;}
body{background:var(--bg);padding:20px;max-width:480px;margin:0 auto;color:var(--text);transition:all .2s}
.title{text-align:center;font-size:22px;font-weight:600;margin:20px 0}
.version{text-align:center;font-size:14px;color:var(--text-gray);margin-bottom:10px}
.card{background:var(--card);border-radius:16px;padding:24px}
.item{margin-bottom:18px}
.label{font-size:15px;margin-bottom:10px;display:block;}
input{width:100%;height:48px;border:1px solid var(--input-border);border-radius:12px;padding:0 16px;font-size:16px;background:transparent;color:var(--text)}
input.error-border{border-color:#ff4d4f !important;}
.btn-row{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin:10px 0}
button{height:52px;border:none;border-radius:12px;font-size:17px}
button.calc{background:var(--btn-calc);color:#fff}
button.calc:disabled{background:#ccc}
button.clear{background:var(--btn-clear);color:var(--text)}
.result-box{margin-top:24px;padding-top:20px;border-top:1px solid var(--result-line)}
.line{margin-bottom:12px}
.label2{color:var(--text-secondary)}
.rate{font-size:22px;font-weight:bold}
.profit{font-size:17px;font-weight:bold}
.color-red{color:red}
.color-orange{color:#f90}
.color-pink{color:#f6c}
.color-green{color:green}
.tip{padding:12px;background:var(--tip-bg);border-radius:8px;font-weight:bold}
.theme-bottom{margin-top:24px;text-align:center}
.theme-icon-btn{width:50px;height:50px;border-radius:50%;background:var(--btn-clear);border:none;font-size:22px;color:var(--text)}
.error {min-height:18px;font-size:13px;color:#ff4d4f;margin-top:4px;}
</style>
</head>
<body>
<div class="title">å¼€ç›˜æº¢ä»·ç‡è®¡ç®—å™¨</div>
<div class="version">v1.4ï¼ˆä¼˜åŒ–ç‰ˆï¼‰</div>
<div class="card">
  <div class="item">
    <label class="label">æ˜¨æ—¥æ”¶ç›˜ä»·</label>
    <input type="number" id="yes" placeholder="è¯·è¾“å…¥æ˜¨æ—¥æ”¶ç›˜ä»·">
    <div class="error" id="yes-error"></div>
  </div>
  <div class="item">
    <label class="label">ä»Šæ—¥å¼€ç›˜ä»·</label>
    <input type="number" id="now" placeholder="è¯·è¾“å…¥ä»Šæ—¥å¼€ç›˜ä»·">
    <div class="error" id="now-error"></div>
  </div>
  <div class="item">
    <label class="label">æŒè‚¡æ•°é‡ï¼ˆè‚¡ï¼‰</label>
    <input type="number" id="shares" placeholder="é€‰å¡«">
    <div class="error" id="shares-error"></div>
  </div>
  <div class="btn-row">
    <button class="calc" id="calc" disabled>è®¡ç®—</button>
    <button class="clear" id="clear">æ¸…ç©º</button>
  </div>
  <div class="result-box">
    <div class="line"><span class="label2">å¼€ç›˜æº¢ä»·ç‡ï¼š</span><span id="rate" class="rate">è¯·è¾“å…¥ä»·æ ¼è®¡ç®—</span></div>
    <div class="line"><span class="label2">å½“å‰æ¡£ä½ï¼š</span><span id="level">-</span></div>
    <div class="line"><span class="label2">å¼€ç›˜é¢„ä¼°ç›ˆäºï¼š</span><span id="profit">-</span></div>
    <div class="line"><span class="label2">æ“ä½œå»ºè®®ï¼š</span><div class="tip" id="tip">-</div></div>
  </div>
  <div class="theme-bottom">
    <button id="theme" class="theme-icon-btn">â˜€ï¸</button>
  </div>
</div>
<script>
const root=document.documentElement,theme=document.getElementById("theme"),yes=document.getElementById("yes"),now=document.getElementById("now"),shares=document.getElementById("shares"),calc=document.getElementById("calc"),clear=document.getElementById("clear");
const yesError=document.getElementById("yes-error"),nowError=document.getElementById("now-error"),sharesError=document.getElementById("shares-error");
function clearError(input,errorEl){input.classList.remove("error-border");errorEl.textContent="";}
function showError(input,errorEl,message){input.classList.add("error-border");errorEl.textContent=message;}
function validatePrice(input,errorEl){const value=input.value.trim();if(value===""){clearError(input,errorEl);return null;}const num=parseFloat(value);if(isNaN(num)||num<=0){showError(input,errorEl,"ä»·æ ¼å¿…é¡»æ˜¯å¤§äº 0 çš„æ•°å­—");return null;}const formatted=parseFloat(num.toFixed(2));if(formatted!==num){input.value=formatted;}clearError(input,errorEl);return formatted;}
function validateShares(input,errorEl){const value=input.value.trim();if(value===""){clearError(input,errorEl);return 0;}const num=parseFloat(value);if(isNaN(num)||num<0){showError(input,errorEl,"è‚¡æ•°ä¸èƒ½ä¸ºè´Ÿæ•°");return null;}clearError(input,errorEl);return num;}
function update(){const y=validatePrice(yes,yesError);const n=validatePrice(now,nowError);const s=validateShares(shares,sharesError);const valid=y!==null&&n!==null&&s!==null;calc.disabled=!valid;}
yes.addEventListener("input",update);now.addEventListener("input",update);shares.addEventListener("input",update);
theme.addEventListener("click",()=>{const isDark=root.classList.toggle("dark");theme.innerHTML=isDark?"ğŸŒ™":"â˜€ï¸";});
clear.addEventListener("click",()=>{yes.value="";now.value="";shares.value="";clearError(yes,yesError);clearError(now,nowError);clearError(shares,sharesError);update();
document.getElementById("rate").textContent="è¯·è¾“å…¥ä»·æ ¼è®¡ç®—";document.getElementById("rate").className="rate";
document.getElementById("level").textContent="-";document.getElementById("profit").textContent="-";
document.getElementById("profit").className="profit";document.getElementById("tip").textContent="-";});
calc.addEventListener("click",()=>{const y=validatePrice(yes,yesError);const n=validatePrice(now,nowError);const s=validateShares(shares,sharesError);
if(y===null||n===null||s===null){alert("è¯·ä¿®æ­£è¾“å…¥é”™è¯¯åå†è®¡ç®—ï¼");return;}
const p=((n-y)/y*100).toFixed(2);const rt=(p>=0?"+":"")+p+"%";const tp=(n-y)*s;const pt=s>0?tp.toFixed(2)+" å…ƒ":"æœªè¾“å…¥è‚¡æ•°";
let pc="";if(s>0){pc=tp>0?"color-red":tp<0?"color-green":"";}
let lv,tip,cc;const pNum=parseFloat(p);
if(pNum>5){lv="å¼ºåŠ¿é«˜å¼€";tip="ä¸è·Œç ´3%å¯æŒæœ‰åšå¼ˆè¿æ¿";cc="color-red";}
else if(pNum>=2){lv="è‰¯æ€§é«˜å¼€";tip="å†²é«˜7%ä»¥ä¸Šå‡åŠä»“ï¼Œå‰©ä½™ç»§ç»­æŒæœ‰";cc="color-orange";}
else if(pNum>=0){lv="å¼±æº¢ä»·";tip="æ—©ç›˜åŠå°æ—¶ä¸ä¸Šæ”»åˆ™æœæ–­ç¦»åœº";cc="color-pink";}
else{lv="ä½å¼€èµ°å¼±";tip="å¼€ç›˜ç›´æ¥å–å‡ºï¼Œè§„é¿ç ¸ç›˜é£é™©";cc="color-green";}
const rateEl=document.getElementById("rate");const levelEl=document.getElementById("level");
const profitEl=document.getElementById("profit");const tipEl=document.getElementById("tip");
rateEl.className="rate "+cc;rateEl.textContent=rt;levelEl.textContent=lv;
profitEl.className="profit "+pc;profitEl.textContent=pt;tipEl.textContent=tip;});
</script>
</body>
</html>
